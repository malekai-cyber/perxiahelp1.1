<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perxia Help - Copilot</title>
    <link rel="stylesheet" href="/css/variables.css">
    <link rel="stylesheet" href="/css/chatbot.css">
</head>
<body>
    <div class="chat-app" id="chatApp">
        <div class="ambient-glow"></div>
        <div class="grid-pattern"></div>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/pages/menu.html" class="brand">
                    <svg class="brand-icon" viewBox="0 0 32 32" fill="none">
                        <path d="M16 4C11 4 7 8 7 13v3c0 2 1 3 2 3h1v-4c0-3 3-6 6-6s6 3 6 6v4h1c1 0 2-1 2-3v-3c0-5-4-9-9-9z" stroke="currentColor" stroke-width="1.5" fill="none"/>
                        <rect x="11" y="12" width="4" height="3" rx="1" fill="currentColor" opacity="0.8"/>
                        <rect x="17" y="12" width="4" height="3" rx="1" fill="currentColor" opacity="0.8"/>
                        <circle cx="16" cy="3" r="1.5" fill="currentColor"/>
                        <line x1="16" y1="4.5" x2="16" y2="6" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M10 20h12v6c0 2-2 4-6 4s-6-2-6-4v-6z" stroke="currentColor" stroke-width="1.5" fill="none"/>
                    </svg>
                    <span>Perxia Help</span>
                </a>
                <div class="sidebar-actions">
                    <button id="newChatBtn" class="icon-btn" title="Nueva conversaci√≥n">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 5v14M5 12h14"/>
                        </svg>
                    </button>
                    <button id="collapseSidebar" class="icon-btn" title="Ocultar">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M11 17l-5-5 5-5"/>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="copilot-card">
                <div class="copilot-avatar">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M12 2C7 2 3 6 3 11v2c0 1.5 1 2.5 2 2.5h1v-3c0-3.5 3-6 6-6s6 2.5 6 6v3h1c1 0 2-1 2-2.5v-2c0-5-4-9-9-9z"/>
                        <rect x="8" y="10" width="3" height="2.5" rx="0.5" fill="currentColor"/>
                        <rect x="13" y="10" width="3" height="2.5" rx="0.5" fill="currentColor"/>
                        <path d="M8 17h8v4c0 1.5-2 3-4 3s-4-1.5-4-3v-4z"/>
                    </svg>
                </div>
                <h3>Perxia Copilot</h3>
                <p>Tu asistente de IA corporativo</p>
            </div>

            <div class="sidebar-section">
                <span class="section-label">Capacidades</span>
                <div class="capability-list">
                    <div class="capability-item">
                        <span>üìÑ</span>
                        <span>An√°lisis de documentos</span>
                    </div>
                    <div class="capability-item">
                        <span>üîç</span>
                        <span>B√∫squeda inteligente</span>
                    </div>
                    <div class="capability-item">
                        <span>üí¨</span>
                        <span>Lenguaje natural</span>
                    </div>
                    <div class="capability-item">
                        <span>üìä</span>
                        <span>Res√∫menes ejecutivos</span>
                    </div>
                </div>
            </div>

            <div class="sidebar-section">
                <span class="section-label">Tips</span>
                <div class="tips-list">
                    <p>üí° S√© espec√≠fico para mejores respuestas</p>
                    <p>üìé Adjunta documentos para an√°lisis</p>
                    <p>‚ö° Usa Pro para razonamiento avanzado</p>
                </div>
            </div>

            <div class="sidebar-footer">
                <input type="file" id="fileInput" hidden multiple>
            </div>
        </aside>

        <!-- Main -->
        <main class="main-content">
            <button id="expandSidebar" class="expand-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M13 17l5-5-5-5"/>
                </svg>
            </button>

            <header class="chat-header">
                <div class="header-left">
                    <button id="backBtn" class="icon-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <div class="header-info">
                        <h1>Perxia Help - Copilot</h1>
                        <div class="header-meta">
                            <span class="status-dot"></span>
                            <span>En l√≠nea</span>
                            <span class="sep">¬∑</span>
                            <span id="currentModelDisplay">Perxia Copilot</span>
                        </div>
                    </div>
                </div>
                <div class="header-right">
                    <button id="toggleDocsPanel" class="icon-btn" title="Documentos">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                        </svg>
                    </button>
                    <div class="user-avatar" id="userAvatar">U</div>
                </div>
            </header>

            <div class="chat-container" id="chatMessages">
                <div class="welcome-screen" id="welcomeScreen">
                    <div class="welcome-icon">‚ú®</div>
                    <h2>¬øEn qu√© puedo ayudarte?</h2>
                    <p>Soy tu asistente de IA. Puedo analizar documentos, responder consultas y crear res√∫menes.</p>
                    
                    <div class="suggestions">
                        <button class="suggestion-btn" data-prompt="Resume el documento que te voy a compartir">üìÑ Resumir documento</button>
                        <button class="suggestion-btn" data-prompt="Extrae los puntos clave">üìã Puntos clave</button>
                        <button class="suggestion-btn" data-prompt="Realiza un an√°lisis t√©cnico">üîç An√°lisis t√©cnico</button>
                        <button class="suggestion-btn" data-prompt="Compara estos documentos">üìä Comparar docs</button>
                    </div>
                </div>
            </div>

            <div class="input-area">
                <form id="chatForm" class="input-form">
                    <div class="input-wrapper">
                        <div class="model-selector" id="modelSelector">
                            <button type="button" class="model-btn" id="modelBtn">
                                <span id="modelBtnText">Copilot</span>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                                    <polyline points="6 9 12 15 18 9"/>
                                </svg>
                            </button>
                            <div class="model-menu" id="modelMenu">
                                <button type="button" class="model-item active" data-model="deepseek-chat">
                                    <span class="model-name">Perxia Copilot</span>
                                    <span class="model-desc">R√°pido y eficiente</span>
                                </button>
                                <button type="button" class="model-item pro" data-model="deepseek-reasoner">
                                    <span class="model-name">Perxia Copilot Pro <span class="pro-tag">PRO</span></span>
                                    <span class="model-desc">Razonamiento avanzado</span>
                                </button>
                            </div>
                        </div>
                        
                        <textarea id="chatInput" placeholder="Escribe tu consulta..." rows="1"></textarea>
                        
                        <button type="button" id="attachBtn" class="attach-btn" title="Adjuntar">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/>
                            </svg>
                        </button>
                        
                        <button type="submit" id="sendBtn" class="send-btn" disabled>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="22" y1="2" x2="11" y2="13"/>
                                <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                            </svg>
                        </button>
                    </div>
                    <span class="input-hint">Enter enviar ¬∑ Shift+Enter nueva l√≠nea</span>
                </form>
            </div>
        </main>

        <!-- Docs Panel -->
        <aside class="docs-panel" id="docsPanel">
            <div class="docs-header">
                <h3>Documentos</h3>
                <button id="closePanelBtn" class="icon-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="docs-content">
                <div class="empty-state">
                    <span>üìÑ</span>
                    <p>No hay documentos</p>
                </div>
            </div>
        </aside>
    </div>

    <script src="/config.js"></script>
    <script src="https://alcdn.msauth.net/browser/2.38.1/js/msal-browser.min.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/app-chatbot.js"></script>
</body>
</html>
